<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="499px" preserveAspectRatio="none" style="width:1317px;height:499px;background:#FFFFFF;" version="1.1" viewBox="0 0 1317 499" width="1317px" zoomAndPan="magnify"><script xmlns=""/><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="187" x2="187" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="506" x2="506" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="836.5" x2="836.5" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1003" x2="1003" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1077" x2="1077" y1="36.2969" y2="464.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1273" x2="1273" y1="36.2969" y2="464.1563"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="24.9951">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="5" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="483.1514">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="144" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="151" y="24.9951">http_gate</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="144" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="151" y="483.1514">http_gate</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="482" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="489" y="24.9951">redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="482" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="489" y="483.1514">redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="768.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="775.5" y="24.9951">spin_worker_app</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="768.5" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="775.5" y="483.1514">spin_worker_app</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="987" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="994" y="24.9951">pg</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="987" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="994" y="483.1514">pg</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="1030" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1037" y="24.9951">subxtproxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="1030" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="1037" y="483.1514">subxtproxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1236" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1243" y="24.9951">subnode</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1236" y="463.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="1243" y="483.1514">subnode</text><polygon fill="#181818" points="175.5,63.4297,185.5,67.4297,175.5,71.4297,179.5,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="181.5" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="34.5" y="62.3638">1. HTTP query</text><polygon fill="#181818" points="494.5,92.5625,504.5,96.5625,494.5,100.5625,498.5,96.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="187.5" x2="500.5" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295" x="194.5" y="91.4966">2. push request to redis channel `proxy2spin`</text><polygon fill="#181818" points="824.5,121.6953,834.5,125.6953,824.5,129.6953,828.5,125.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506.5" x2="830.5" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="513.5" y="120.6294">3. listen channel `proxy2spin`</text><polygon fill="#181818" points="991.5,150.8281,1001.5,154.8281,991.5,158.8281,995.5,154.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.5" x2="997.5" y1="154.8281" y2="154.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="843.5" y="149.7622">4. query data from db</text><polygon fill="#181818" points="847.5,179.9609,837.5,183.9609,847.5,187.9609,843.5,183.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="841.5" x2="1002.5" y1="183.9609" y2="183.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="853.5" y="178.895">5. return data from db</text><polygon fill="#181818" points="517.5,209.0938,507.5,213.0938,517.5,217.0938,513.5,213.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="511.5" x2="835.5" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306" x="523.5" y="208.0278">6. make id-hash list to check the on-chain index</text><polygon fill="#181818" points="1065.5,238.2266,1075.5,242.2266,1065.5,246.2266,1069.5,242.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506.5" x2="1071.5" y1="242.2266" y2="242.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="513.5" y="237.1606">7. listen channel `spin2proxy`</text><polygon fill="#181818" points="1261.5,267.3594,1271.5,271.3594,1261.5,275.3594,1265.5,271.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1077.5" x2="1267.5" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="1084.5" y="266.2935">8. call `check_pair_list` rpc</text><polygon fill="#181818" points="1088.5,296.4922,1078.5,300.4922,1088.5,304.4922,1084.5,300.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1082.5" x2="1272.5" y1="300.4922" y2="300.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="1094.5" y="295.4263">9. return checked result</text><polygon fill="#181818" points="517.5,325.625,507.5,329.625,517.5,333.625,513.5,329.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="511.5" x2="1076.5" y1="329.625" y2="329.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="523.5" y="324.5591">10. pass result through</text><polygon fill="#181818" points="824.5,354.7578,834.5,358.7578,824.5,362.7578,828.5,358.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="506.5" x2="830.5" y1="358.7578" y2="358.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282" x="513.5" y="353.6919">11. get the checked result and process data</text><polygon fill="#181818" points="517.5,383.8906,507.5,387.8906,517.5,391.8906,513.5,387.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="511.5" x2="835.5" y1="387.8906" y2="387.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="523.5" y="382.8247">12. write data to redis cache</text><polygon fill="#181818" points="198.5,413.0234,188.5,417.0234,198.5,421.0234,194.5,417.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="192.5" x2="505.5" y1="417.0234" y2="417.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="204.5" y="411.9575">13. retreive data from redis cache</text><polygon fill="#181818" points="38.5,442.1563,28.5,446.1563,38.5,450.1563,34.5,446.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="186.5" y1="446.1563" y2="446.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="44.5" y="441.0903">14. back data to user</text><!--SRC=[VLAvTi8m4Epz5VC3-CMGqqNgb2cWDiBQs7eOIT4HuE-p4WvNU9IhdTdPqSx2ayFa7Nq8jkb48DIeIdpCvv_uZkJsnQd3C4TI-HhJ4ZRwdal6-81W3XsqlT2Q1YojCxlzr5kbbyMXnUnKDblZrkGQOMsDMOb1-K3wDl4AdqROhiPZULWDKWI1BsSsaAl2TZSbdafUBKIdBz4tHe_Udajin9gWvAGNx34jc0osFRLhX9vWz8JNLHfAIzgTsOkhNSZxrtZvxon9JdERdHsX8r4RIJLUIxHYO6mMQwnGhabZbd2sBKROjTJRqM5caUJIno5SYOpsgWU-dV1-1B4XPsBNtpbInNdeA6JhbmeGMe85Mk9vwNllV6l5cTawnJ7ATpWbHl3Ca_enRSoOPMEEr0-T7U-STf7D1KUPMPoEbU1B_Sb4Vlu5]--></g></svg>