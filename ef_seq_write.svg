<?xml version="1.0" encoding="windows-1252" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="615px" preserveAspectRatio="none" style="width:1260px;height:615px;background:#FFFFFF;" version="1.1" viewBox="0 0 1260 615" width="1260px" zoomAndPan="magnify"><script xmlns=""/><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="27" x2="27" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="187" x2="187" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="430" x2="430" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647" x2="647" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="907" x2="907" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1023" x2="1023" y1="36.2969" y2="580.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1237.5" x2="1237.5" y1="36.2969" y2="580.6875"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="24.9951">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="5" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="12" y="599.6826">User</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="144" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="151" y="24.9951">http_gate</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="87" x="144" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="151" y="599.6826">http_gate</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="406" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="413" y="24.9951">redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="49" x="406" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="35" x="413" y="599.6826">redis</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="600" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="607" y="24.9951">subxtproxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95" x="600" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81" x="607" y="599.6826">subxtproxy</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="870" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="877" y="24.9951">subnode</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="870" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="877" y="599.6826">subnode</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="955" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="962" y="24.9951">spin_worker_app</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="955" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="962" y="599.6826">spin_worker_app</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="1221.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="1228.5" y="24.9951">pg</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="33" x="1221.5" y="579.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="1228.5" y="599.6826">pg</text><polygon fill="#181818" points="175.5,63.4297,185.5,67.4297,175.5,71.4297,179.5,67.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="27.5" x2="181.5" y1="67.4297" y2="67.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="34.5" y="62.3638">1. HTTP Request</text><polygon fill="#181818" points="418.5,92.5625,428.5,96.5625,418.5,100.5625,422.5,96.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="187.5" x2="424.5" y1="96.5625" y2="96.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="194.5" y="91.4966">2. redirect raw request</text><polygon fill="#181818" points="635.5,121.6953,645.5,125.6953,635.5,129.6953,639.5,125.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="430.5" x2="641.5" y1="125.6953" y2="125.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="437.5" y="120.6294">3. listen channel `spin2proxy`</text><polygon fill="#181818" points="895.5,150.8281,905.5,154.8281,895.5,158.8281,899.5,154.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647.5" x2="901.5" y1="154.8281" y2="154.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="654.5" y="149.7622">4. call `act` dispatchable</text><polygon fill="#181818" points="658.5,179.9609,648.5,183.9609,658.5,187.9609,654.5,183.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652.5" x2="906.5" y1="183.9609" y2="183.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="664.5" y="178.895">5. emit event of `Act`</text><polygon fill="#181818" points="441.5,209.0938,431.5,213.0938,441.5,217.0938,437.5,213.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="435.5" x2="646.5" y1="213.0938" y2="213.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="100" x="447.5" y="208.0278">6. pass through</text><polygon fill="#181818" points="1011,238.2266,1021,242.2266,1011,246.2266,1015,242.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="430.5" x2="1017" y1="242.2266" y2="242.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="437.5" y="237.1606">7. listen channel `proxy2spin`</text><polygon fill="#181818" points="1226,267.3594,1236,271.3594,1226,275.3594,1230,271.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1023" x2="1232" y1="271.3594" y2="271.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="1030" y="266.2935">8. main logic, write data to db</text><polygon fill="#181818" points="1034,296.4922,1024,300.4922,1034,304.4922,1030,300.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1028" x2="1237" y1="300.4922" y2="300.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="1040" y="295.4263">9. the result of action</text><polygon fill="#181818" points="441.5,325.625,431.5,329.625,441.5,333.625,437.5,329.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="435.5" x2="1022" y1="329.625" y2="329.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="187" x="447.5" y="324.5591">10. update id-hash pair index</text><polygon fill="#181818" points="635.5,354.7578,645.5,358.7578,635.5,362.7578,639.5,358.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="430.5" x2="641.5" y1="358.7578" y2="358.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="437.5" y="353.6919">11. pass through</text><polygon fill="#181818" points="895.5,383.8906,905.5,387.8906,895.5,391.8906,899.5,387.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="647.5" x2="901.5" y1="387.8906" y2="387.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236" x="654.5" y="382.8247">12: call `update_index` dispatchable</text><polygon fill="#181818" points="658.5,413.0234,648.5,417.0234,658.5,421.0234,654.5,417.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652.5" x2="906.5" y1="417.0234" y2="417.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="664.5" y="411.9575">13: emit event of `UpdateIndex`</text><polygon fill="#181818" points="441.5,442.1563,431.5,446.1563,441.5,450.1563,437.5,446.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="435.5" x2="646.5" y1="446.1563" y2="446.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="447.5" y="441.0903">14. pass through</text><polygon fill="#181818" points="1011,471.2891,1021,475.2891,1011,479.2891,1015,475.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="430.5" x2="1017" y1="475.2891" y2="475.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108" x="437.5" y="470.2231">15. pass through</text><polygon fill="#181818" points="441.5,500.4219,431.5,504.4219,441.5,508.4219,437.5,504.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="435.5" x2="1022" y1="504.4219" y2="504.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="447.5" y="499.356">16. write data to redis cache</text><polygon fill="#181818" points="198.5,529.5547,188.5,533.5547,198.5,537.5547,194.5,533.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="192.5" x2="429.5" y1="533.5547" y2="533.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219" x="204.5" y="528.4888">17. retreive data from redis cache</text><polygon fill="#181818" points="38.5,558.6875,28.5,562.6875,38.5,566.6875,34.5,562.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="32.5" x2="186.5" y1="562.6875" y2="562.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="44.5" y="557.6216">18. back data to user</text><!--SRC=[ZLFDKeCm4Bxp5Fi0DYEqjSh16MzwSvps325i8LEQn2IqzUrTKgOLn8utGhw_pPTi75gOFKFjlSagxX5IY1cyhjVly86VBJeVNVS8QB6KBeM4XI-BmeFbHrgSiM6xmxcsE7bZzUahXJc3HZgF2aJDbS86ScUaIi9s7bsXFL7f4bDOC12y8ImNFWUIDTmJlsWmwZ5ZdoK3t4iFU43bGMyXVo7gIByVu861uSw1hwrkgnf-9ATesL7R7TgC6vF2wdVye9PqI98VuZi9KwNmo63FfO96LrBSmT5AEi2IUmvUGrb0PAf9joT6cP1YkhO9Gz3uKgifctwK-9v1Qygk85dEQkvg6arQaAh4qtGZSJmU_uyIuYJjMpWxP47qVtN4ytJSnoQ8l0MDwLxYnJ3PZLxYvGXwuuYexc43Prd1HOrNYyjD9yQgk-7UeZpqfAtL-m5jy2usz928HQqNNEmkDYtz_WO0]--></g></svg>